<!doctype html>
<html lang="ru" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-launch-params/init-data">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Данные инициализации | Telegram Web Apps documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://twa-dev.github.io/ru/docs/launch-params/init-data"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Данные инициализации | Telegram Web Apps documentation"><meta data-rh="true" name="description" content="В списке параметров запуска, данные инициализации располагаются в"><meta data-rh="true" property="og:description" content="В списке параметров запуска, данные инициализации располагаются в"><link data-rh="true" rel="icon" href="/ru/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://twa-dev.github.io/ru/docs/launch-params/init-data"><link data-rh="true" rel="alternate" href="https://twa-dev.github.io/docs/launch-params/init-data" hreflang="en"><link data-rh="true" rel="alternate" href="https://twa-dev.github.io/ru/docs/launch-params/init-data" hreflang="ru"><link data-rh="true" rel="alternate" href="https://twa-dev.github.io/docs/launch-params/init-data" hreflang="x-default"><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"><link rel="stylesheet" href="/ru/assets/css/styles.22ed0b32.css">
<link rel="preload" href="/ru/assets/js/runtime~main.1890e86f.js" as="script">
<link rel="preload" href="/ru/assets/js/main.b53d9e7b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Перейти к основному содержимому"><a class="skipToContent_pExh" href="#docusaurus_skipToContent_fallback">Перейти к основному содержимому</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Переключить навигационную панель" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ru/"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ru/docs/introduction/about-platform">Документация</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_BSOA"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Русский</a><ul class="dropdown__menu"><li><a href="/docs/launch-params/init-data" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/ru/docs/launch-params/init-data" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ru">Русский</a></li></ul></div><a href="https://github.com/twa-dev/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-logo">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none">
    <path fill="currentColor" fill-rule="evenodd" d="M12 .75C5.646.75.5 5.896.5 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547 4.543-1.524 7.835-5.837 7.835-10.911C23.5 5.896 18.354.75 12 .75Z" clip-rule="evenodd"/>
  </svg>
</a><div class="toggle_bZgX colorModeToggle_lwzy root_MOhn"><button class="clean-btn toggleButton__tf3 toggleButtonDisabled_H46L" type="button" disabled="" title="Переключение между темным и светлым режимом (сейчас используется Светлый режим)" aria-label="Переключение между темным и светлым режимом (сейчас используется Светлый режим)" aria-live="polite"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 22 22" fill="none" class="lightToggleIcon_ie4A"><path fill="currentColor" d="M16.372 11.001a5.372 5.372 0 1 1-10.744 0 5.372 5.372 0 0 1 10.744 0ZM11.768 3.837V.767a.767.767 0 1 0-1.535 0v3.07a.767.767 0 0 0 1.535 0ZM18.777 3.222a.767.767 0 0 0-1.085 0L16.25 4.664a.757.757 0 0 0 0 1.085c.141.148.338.23.543.225.203.001.399-.08.542-.225l1.443-1.443a.767.767 0 0 0 0-1.084ZM21.233 10.232h-3.07a.767.767 0 0 0 0 1.535h3.07a.767.767 0 1 0 0-1.535ZM17.334 16.25a.768.768 0 0 0-1.085 1.084l1.443 1.443a.757.757 0 0 0 .543.225.768.768 0 0 0 .542-1.31l-1.443-1.443ZM11.768 21.234v-3.07a.767.767 0 0 0-1.535 0v3.07a.768.768 0 1 0 1.535 0ZM4.308 18.777l1.442-1.443a.768.768 0 0 0-1.084-1.085l-1.443 1.443a.767.767 0 0 0 1.085 1.085ZM0 11a.778.778 0 0 0 .767.767h3.07a.767.767 0 0 0 0-1.535H.767a.777.777 0 0 0-.767.767ZM4.308 3.225A.767.767 0 1 0 3.224 4.31l1.443 1.443a.757.757 0 0 0 .542.225.727.727 0 0 0 .542-.225.757.757 0 0 0 0-1.085L4.308 3.225Z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_eLan"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_UgxM"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_NbY9 docsWrapper__iZK"><div class="root_rS2H"><button aria-label="Прокрутка к началу" class="clean-btn theme-back-to-top-button backToTopButton_GuJc" type="button"></button></div><div class="docPage_WDkx"><div class="root_Dgn7"><div class="sticky_i8QA"><div class="logoWrapper_KKua"><img width="32" height="32" src="/ru/assets/images/logo-102b19e0b98aa72967c15ef826f442f1.png" alt="twa dev logo"><span class="logoText_COcz">Web Apps</span></div><aside class="theme-doc-sidebar-container docSidebarContainer_vZ36"><div class="sidebarViewport_iXfJ"><div class="sidebar_yi8W"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Gj3_"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ru/docs/introduction/about-platform">Введение</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ru/docs/supported-applications">Поддерживаемые приложения</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ru/docs/apps-communication/how-it-works">Общение приложений</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/ru/docs/launch-params/about">Параметры запуска</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/launch-params/about">Основная информация</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ru/docs/launch-params/init-data">Данные инициализации</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ru/docs/functionality/closing-behavior">Функциональные возможности</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ru/docs/ui/back-button">UI</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ru/docs/test-environment">Тестовая среда</a></li></ul></nav></div></div></aside></div></div><main class="docMainContainer_nJQ0"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_N9zO"><div class="docItemContainer_cK1e"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_A1lg" aria-label="Навигационная цепочка текущей страницы"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Главная страница" class="breadcrumbs__link" href="/ru/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_o3cV"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Параметры запуска</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Данные инициализации</span><meta itemprop="position" content="2"></li></ul></nav><div class="root_TKg4"><div class="tocCollapsible_GWtf theme-doc-toc-mobile tocMobile_w0z8"><button type="button" class="clean-btn tocCollapsibleButton_SRsG">Содержание этой страницы</button></div></div><div class="theme-doc-markdown markdown"><h1>Данные инициализации</h1><p>В списке <a href="/ru/docs/launch-params/about">параметров запуска</a>, данные инициализации располагаются в
параметре <code>tgWebAppData</code>. Они представляют собой набор данных, которые могут
быть важны в серверной части приложения.</p><p>Яркой особенностью данных инициализации является тот факт, что они могут
быть использованы как фактор аутентификации или авторизации. По этой причине
не стоит забывать и о безопасности приложения.</p><div class="root_JGtz"><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_c13U"><div class="admonitionHeading_C8z3"><span class="admonitionIcon_SCKh"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>предупреждение</div><div class="admonitionContent_DVpw"><p>Этот параметр не передается приложению TWA в случае, если оно было открыто
при помощи KeyboardButton (из клавиатуры в диалоге).</p></div></div></div><h2 class="anchor anchorWithStickyNavbar_bt8x" id="извлечение">Извлечение<a href="#извлечение" class="hash-link" aria-label="Прямая ссылка на Извлечение" title="Прямая ссылка на Извлечение">​</a></h2><p>Для того чтобы извлечь данные инициализации, достаточно сначала получить
параметры запуска, после чего извлечь параметр <code>tgWebAppData</code> и поместить его
в конструктор <code>URLSearchParams</code>:</p><div class="language-typescript codeBlockContainer_zPic theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_cGRr">Пример извлечения данных инициализации</div><div class="codeBlockContent_T75g"><pre tabindex="0" class="prism-code language-typescript codeBlock_fwWJ thin-scrollbar"><code class="codeBlockLines_KKXk"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Получаем параметры запуска.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hashParams </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Конвертируем в более удобный вид.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initDataString </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hashParams</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;tgWebAppData&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// user=...&amp;query_id=...&amp;...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initDataString</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Выводим подпись данных инициализации.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initData</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;hash&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// jsHS198czozxk7s8vvhhhrw</span><br></span></code></pre><div class="buttonGroup_fS0G"><button type="button" aria-label="Скопировать в буфер обмена" title="Скопировать" class="clean-btn"><span class="copyButtonIcons_W11N" aria-hidden="true"><svg class="copyButtonIcon__po2" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Fcgc" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_bt8x" id="авторизация-и-аутентификация">Авторизация и аутентификация<a href="#авторизация-и-аутентификация" class="hash-link" aria-label="Прямая ссылка на Авторизация и аутентификация" title="Прямая ссылка на Авторизация и аутентификация">​</a></h2><p>Особенной чертой данных инициализации является возможность быть использованными
как фактор для авторизации или аутентификации. Дело в том, что сгенерированные
нативным приложением Telegram данные подписываются секретным ключом бота
Telegram, после чего сгенерированная подпись помещается рядом с самими
параметрами.</p><p>Таким образом, зная секретный ключ бота Telegram, у разработчика имеется
возможность проверить подпись данных и после этого им доверять.</p><p>Также, операция проверки подписи является достаточно быстрой и не требует
больших ресурсов сервера. Подробнее с алгоритмом подписи данных и верификации
можно ознакомиться
в <a href="https://core.telegram.org/bots/webapps#validating-data-received-via-the-web-app" target="_blank" rel="noopener noreferrer">этой документации</a>.</p><h2 class="anchor anchorWithStickyNavbar_bt8x" id="отправка-на-сервер">Отправка на сервер<a href="#отправка-на-сервер" class="hash-link" aria-label="Прямая ссылка на Отправка на сервер" title="Прямая ссылка на Отправка на сервер">​</a></h2><p>Для того чтобы провести авторизацию пользователя на сервере, разработчику
необходимо передать те данные инициализации, которые были указаны при
запуске приложения TWA. Чтобы сделать себе жизнь проще, разработчик может
передавать их при каждом запросе к серверу, после чего на серверной стороне
проводить проверку подписи.</p><p>Рассмотрим простейший возможный пример с использованием такой библиотеки как
<code>axios</code>:</p><div class="language-typescript codeBlockContainer_zPic theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_cGRr">Пример передачи данных инициализации на сервер</div><div class="codeBlockContent_T75g"><pre tabindex="0" class="prism-code language-typescript codeBlock_fwWJ thin-scrollbar"><code class="codeBlockLines_KKXk"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> axios </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;axios&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> hash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hash</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> params </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URLSearchParams</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> params</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;tgWebAppData&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initData </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Ooof! Something is wrong. Init data is missing&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Создаём экземпляр axios.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Добавляем заголовок авторизации.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">twa-init-data </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">initData</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_fS0G"><button type="button" aria-label="Скопировать в буфер обмена" title="Скопировать" class="clean-btn"><span class="copyButtonIcons_W11N" aria-hidden="true"><svg class="copyButtonIcon__po2" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Fcgc" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>В свою очередь, на серверной стороне необходимо произвести следующие действия:</p><ol><li>Получить значение заголовка <code>Authorization</code>;</li><li>Проверить, что первая его часть равна <code>twa-init-data</code>;</li><li>Получить данные инициализации и проверить их подпись.</li></ol><p>В случае успеха выполнения этого алгоритма, серверная часть приложения может
доверять переданным данным инициализации.</p><div class="root_JGtz"><div class="theme-admonition theme-admonition-tip alert alert--success admonition_c13U"><div class="admonitionHeading_C8z3"><span class="admonitionIcon_SCKh"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>подсказка</div><div class="admonitionContent_DVpw"><p>В реальных приложениях рекомендуется использовать дополнительные механизмы
проверки данных инициализации. Например, добавить срок их истечения. Эту
проверку можно реализовать при помощи параметра <code>auth_date</code>, который отвечает
за дату создания параметров. В случае кражи данных инициализации,
это решение позволит предотвратить постоянное их использование злоумышленником.</p></div></div></div><h2 class="anchor anchorWithStickyNavbar_bt8x" id="список-параметров">Список параметров<a href="#список-параметров" class="hash-link" aria-label="Прямая ссылка на Список параметров" title="Прямая ссылка на Список параметров">​</a></h2><p>В этой секции рассмотрен полный список параметров, используемых в данных
инициализации.</p><table><thead><tr><th>Параметр</th><th>Тип</th><th>Описание</th></tr></thead><tbody><tr><td>auth_date</td><td><code>number</code></td><td>Дата создания данных инициализации. Является числом, представляющим собой Unix timestamp.</td></tr><tr><td>can_send_after</td><td><code>number</code></td><td><i>Опциональный</i>. Количество секунд, после которого сообщение может быть отправлено через метод <a href="https://core.telegram.org/bots/api#answerwebappquery" target="_blank" rel="noopener noreferrer">answerWebAppQuery</a>.</td></tr><tr><td>chat_type</td><td><code>string</code></td><td><p><i>Опциональный</i>. Тип чата, из которого было открыто приложение TWA. Значения:</p><ul><li><code>sender</code></li><li><code>private</code></li><li><code>group</code></li><li><code>supergroup</code></li><li><code>channel</code></li></ul><p style="margin-bottom:0">Возвращается только для приложений, открытых по прямой ссылке.</p></td></tr><tr><td>chat_instance</td><td><code>string</code></td><td><i>Опциональный</i>. Глобальный идентификатор указывающий на чат, из которого было открыто приложение TWA. Возвращается только для приложений, открытых по прямой ссылке.</td></tr><tr><td>chat</td><td><a href="#chat"><code>Chat</code></a></td><td><i>Опциональный</i>. Объект, содержащий информацию о чате с ботом, в котором было запущено приложение TWA. Возвращается только для приложений TWA, открытых через меню вложений.</td></tr><tr><td>hash</td><td><code>string</code></td><td>Подпись данных инициализации.</td></tr><tr><td>query_id</td><td><code>string</code></td><td><i>Опциональный</i>. Уникальный идентификатор сессии приложения TWA. Используется в процессе отправки сообщения через метод <a href="https://core.telegram.org/bots/api#answerwebappquery" target="_blank" rel="noopener noreferrer">answerWebAppQuery</a>.</td></tr><tr><td>receiver</td><td><a href="#user"><code>User</code></a></td><td><i>Опциональный</i>. Объект, содержащий информацию о пользователе-собеседнике текущего пользователя. Возвращается только для приватных чатов, а также для приложений TWA, открытых через меню вложений.</td></tr><tr><td>start_param</td><td><code>string</code></td><td><i>Опциональный</i>. Значение query-параметра <code>startattach</code> указанного в ссылке. Возвращается только для приложений TWA, открытых через меню вложений.</td></tr><tr><td>user</td><td><a href="#user"><code>User</code></a></td><td><i>Опциональный</i>. Объект, содержащий информацию о текущем пользователе.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_bt8x" id="прочие-типы">Прочие типы<a href="#прочие-типы" class="hash-link" aria-label="Прямая ссылка на Прочие типы" title="Прямая ссылка на Прочие типы">​</a></h2><h3 class="anchor anchorWithStickyNavbar_bt8x" id="chat">Chat<a href="#chat" class="hash-link" aria-label="Прямая ссылка на Chat" title="Прямая ссылка на Chat">​</a></h3><p>Описывает информацию о чате.</p><table><thead><tr><th>Поле</th><th>Тип</th><th>Описание</th></tr></thead><tbody><tr><td>id</td><td><code>number</code></td><td>Уникальный идентификатор чата.</td></tr><tr><td>photo_url</td><td><code>string</code></td><td><i>Опциональное</i>. Ссылка на фотографию чата. Фото может иметь форматы <code>.jpeg</code> и <code>.svg</code>. Возвращается только для приложений TWA, открытых через меню вложений.</td></tr><tr><td>type</td><td><code>string</code></td><td><p><i>Опциональный</i>. Тип чата. Значения:</p><ul><li><code>group</code></li><li><code>supergroup</code></li><li><code>channel</code></li></ul></td></tr><tr><td>title</td><td><code>string</code></td><td>Заголовок чата.</td></tr><tr><td>username</td><td><code>string</code></td><td><i>Опциональный</i>. Логин пользователя чата.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_bt8x" id="user">User<a href="#user" class="hash-link" aria-label="Прямая ссылка на User" title="Прямая ссылка на User">​</a></h3><p>Описывает информацию о пользователе или боте.</p><table><thead><tr><th>Поле</th><th>Тип</th><th>Описание</th></tr></thead><tbody><tr><td>first_name</td><td><code>string</code></td><td>Имя бота или пользователя.</td></tr><tr><td>id</td><td><code>number</code></td><td>Идентификатор бота или пользователя.</td></tr><tr><td>is_bot</td><td><code>boolean</code></td><td><em>Опциональное</em>. Является ли пользователь ботом.</td></tr><tr><td>is_premium</td><td><code>boolean</code></td><td><em>Опциональное</em>. Приобретён ли пользователем Telegram Premium.</td></tr><tr><td>last_name</td><td><code>string</code></td><td><em>Опциональное</em>. Фамилия пользователя.</td></tr><tr><td>language_code</td><td><code>string</code></td><td><em>Опциональное</em>. <a href="https://en.wikipedia.org/wiki/IETF_language_tag" target="_blank" rel="noopener noreferrer">IETF</a> язык пользователя.</td></tr><tr><td>photo_url</td><td><code>string</code></td><td><em>Опциональное</em>. Ссылка на фотографию пользователя или бота. Фото может иметь форматы <code>.jpeg</code> и <code>.svg</code>. Возвращается только для приложений TWA, открытых через меню вложений.</td></tr><tr><td>username</td><td><code>string</code></td><td><em>Опциональное</em>. Логин бота или пользователя.</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/twa-dev/docs/tree/master/docs/launch-params/init-data.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_MhGb" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Отредактировать эту страницу</a></div><div class="col lastUpdated_JZh3"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Навигация по странице документации"><a class="pagination-nav__link pagination-nav__link--prev" href="/ru/docs/launch-params/about"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">Основная информация</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ru/docs/functionality/closing-behavior"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">Поведение закрытия</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cli8 thin-scrollbar theme-doc-toc-desktop root_p_Lm"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#извлечение" class="table-of-contents__link toc-highlight">Извлечение</a></li><li><a href="#авторизация-и-аутентификация" class="table-of-contents__link toc-highlight">Авторизация и аутентификация</a></li><li><a href="#отправка-на-сервер" class="table-of-contents__link toc-highlight">Отправка на сервер</a></li><li><a href="#список-параметров" class="table-of-contents__link toc-highlight">Список параметров</a></li><li><a href="#прочие-типы" class="table-of-contents__link toc-highlight">Прочие типы</a><ul><li><a href="#chat" class="table-of-contents__link toc-highlight">Chat</a></li><li><a href="#user" class="table-of-contents__link toc-highlight">User</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Разработано энтузиастами Telegram Web Apps @ 2023</div></div></div></footer></div>
<script src="/ru/assets/js/runtime~main.1890e86f.js"></script>
<script src="/ru/assets/js/main.b53d9e7b.js"></script>
</body>
</html>